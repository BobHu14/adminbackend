(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-11f1"],{"9bGu":function(t,e,i){"use strict";var n=i("kgrk");i.n(n).a},GQeE:function(t,e,i){t.exports={default:i("iq4v"),__esModule:!0}},Jrd9:function(t,e,i){"use strict";var n=i("Y0z6");i.n(n).a},Mqbl:function(t,e,i){var n=i("JB68"),o=i("w6GO");i("zn7N")("keys",function(){return function(t){return o(n(t))}})},Pya0:function(t,e,i){"use strict";var n=i("wyw5");i.n(n).a},WrxU:function(t,e,i){"use strict";i.r(e);var n=i("4d7F"),o=i.n(n),a=i("GQeE"),s=i.n(a),l={name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[]}},methods:{checkAllSuccess:function(){var t=this;return s()(this.listObj).every(function(e){return t.listObj[e].hasSuccess})},handleSubmit:function(){var t=this,e=s()(this.listObj).map(function(e){return t.listObj[e]});this.checkAllSuccess()?(this.$emit("successCBK",e),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("请等待所有图片上传成功 或 出现了网络问题，请刷新页面重新上传！")},handleSuccess:function(t,e){for(var i=e.uid,n=s()(this.listObj),o=0,a=n.length;o<a;o++)if(this.listObj[n[o]].uid===i)return this.listObj[n[o]].url=t.files.file,void(this.listObj[n[o]].hasSuccess=!0)},handleRemove:function(t){for(var e=t.uid,i=s()(this.listObj),n=0,o=i.length;n<o;n++)if(this.listObj[i[n]].uid===e)return void delete this.listObj[i[n]]},beforeUpload:function(t){var e=this,i=window.URL||window.webkitURL,n=t.uid;return this.listObj[n]={},new o.a(function(o,a){var s=new Image;s.src=i.createObjectURL(t),s.onload=function(){e.listObj[n]={hasSuccess:!1,uid:t.uid,width:this.width,height:this.height}},o(!0)})}}},r=(i("Jrd9"),i("KHd+")),c=Object(r.a)(l,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload-container"},[i("el-button",{style:{background:t.color,borderColor:t.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("上传图片\n  ")]),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":t.fileList,"show-file-list":!0,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"before-upload":t.beforeUpload,action:"https://httpbin.org/post","list-type":"picture-card"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1),t._v(" "),i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("确 定")])],1)],1)},[],!1,null,"6f3dd909",null);c.options.__file="editorImage.vue";var u=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools importcss insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],d=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],m={name:"Tinymce",components:{editorImage:c.exports},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:Number,required:!1,default:360}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN"}}},computed:{language:function(){return this.languageTypeList[this.$store.getters.language]}},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick(function(){return window.tinymce.get(e.tinymceId).setContent(t||"")})},language:function(){var t=this;this.destroyTinymce(),this.$nextTick(function(){return t.initTinymce()})}},mounted:function(){this.initTinymce()},activated:function(){this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{initTinymce:function(){var t=this,e=this;window.tinymce.init({language:"zh_CN",selector:"#"+this.tinymceId,height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:d,menubar:this.menubar,plugins:u,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(i){e.value&&i.setContent(e.value),e.hasInit=!0,i.on("NodeChange Change KeyUp SetContent",function(){t.hasChange=!0,t.$emit("input",i.getContent())})},setup:function(t){t.on("FullscreenStateChanged",function(t){e.fullscreen=t.state})}})},destroyTinymce:function(){window.tinymce.get(this.tinymceId)&&window.tinymce.get(this.tinymceId).destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(t){var e=this;t.forEach(function(t){window.tinymce.get(e.tinymceId).insertContent('<img class="wscnph" src="'+t.url+'" >')})}}},p=(i("9bGu"),Object(r.a)(m,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tinymce-container editor-container",class:{fullscreen:this.fullscreen}},[e("textarea",{staticClass:"tinymce-textarea",attrs:{id:this.tinymceId}}),this._v(" "),e("div",{staticClass:"editor-custom-btn-container"},[e("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:this.imageSuccessCBK}})],1)])},[],!1,null,"8010d9b6",null));p.options.__file="index.vue";var f=p.exports,h=i("ukHw"),b={name:"AddInformation",components:{Tinymce:f},data:function(){return{loading:!1,fileList2:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}],test:"1",informationTypeOptions:[{value:1,label:"新闻动态"},{value:2,label:"产品方案"},{value:3,label:"成功案例"}],publishStatusOptions:[{value:1,label:"草稿"},{value:2,label:"发布"}],temp:{title:"",shortTitle:"",informationType:1,author:"",thumbnail:"",summary:"",keyword:"",publishStatus:1,content:""},rules:{title:[{required:!0,message:"请填写文章标题",trigger:"blur"}],shortTitle:[{required:!0,message:"请填写缩略标题",trigger:"blur"}],informationType:[{required:!0,message:"请选择分类栏目",trigger:"blur"}],publishStatus:[{required:!0,message:"请选择发布状态",trigger:"blur"}],content:[{required:!0,message:"请填写博客文章内容",trigger:"blur"}]}}},created:function(){null!=this.$route.query.editRow&&(this.temp=this.$route.query.editRow)},methods:{backToIndex:function(){this.$router.push({path:"/information/information"})},createData:function(){var t=this;this.$refs.dataForm.validate(function(e){e&&(null!=t.$route.query.editRow?(t.loading=!0,Object(h.d)(t.temp).then(function(){t.loading=!1,t.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3}),t.$router.push({path:"/information/information"})})):(t.loading=!0,Object(h.c)(t.temp).then(function(){t.loading=!1,t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.$router.push({path:"/information/information"})})))})},resetForm:function(t){this.$refs[t].resetFields()},handleRemove:function(t,e){console.log(t,e)},handlePreview:function(t){console.log(t)}}},g=(i("Pya0"),Object(r.a)(b,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"dataForm",staticStyle:{width:"90%","margin-left":"50px"},attrs:{rules:t.rules,model:t.temp,"label-position":"left","label-width":"90px"}},[i("el-form-item",{attrs:{label:"资讯标题",prop:"title"}},[i("el-input",{model:{value:t.temp.title,callback:function(e){t.$set(t.temp,"title","string"==typeof e?e.trim():e)},expression:"temp.title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"简略标题",prop:"shortTitle"}},[i("el-input",{model:{value:t.temp.shortTitle,callback:function(e){t.$set(t.temp,"shortTitle","string"==typeof e?e.trim():e)},expression:"temp.shortTitle"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"分类栏目",prop:"informationType"}},[i("el-select",{staticClass:"filter-item",attrs:{placeholder:"分类栏目",clearable:""},model:{value:t.temp.informationType,callback:function(e){t.$set(t.temp,"informationType",e)},expression:"temp.informationType"}},t._l(t.informationTypeOptions,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"文章作者",prop:"author"}},[i("el-input",{model:{value:t.temp.author,callback:function(e){t.$set(t.temp,"author","string"==typeof e?e.trim():e)},expression:"temp.author"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"缩略图",prop:"thumbnail"}},[i("el-upload",{staticClass:"upload-demo",attrs:{"on-preview":t.handlePreview,"on-remove":t.handleRemove,"file-list":t.fileList2,limit:1,action:"https://jsonplaceholder.typicode.com/posts/","list-type":"picture"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("（暂时未完成）只能上传一张jpg/png文件，且不超过500kb")])],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"文章摘要",prop:"summary"}},[i("el-input",{model:{value:t.temp.summary,callback:function(e){t.$set(t.temp,"summary","string"==typeof e?e.trim():e)},expression:"temp.summary"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"关键词",prop:"keyword"}},[i("el-input",{model:{value:t.temp.keyword,callback:function(e){t.$set(t.temp,"keyword","string"==typeof e?e.trim():e)},expression:"temp.keyword"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"发布状态",prop:"publishStatus"}},[i("el-select",{staticClass:"filter-item",staticStyle:{width:"110px"},attrs:{placeholder:"发布状态",clearable:""},model:{value:t.temp.publishStatus,callback:function(e){t.$set(t.temp,"publishStatus",e)},expression:"temp.publishStatus"}},t._l(t.publishStatusOptions,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"文章内容",prop:"content"}},[i("div",{staticClass:"components-container"},[i("div",[i("tinymce",{attrs:{height:300},model:{value:t.temp.content,callback:function(e){t.$set(t.temp,"content",e)},expression:"temp.content"}})],1)])]),t._v(" "),i("el-form-item",{staticStyle:{float:"right"}},[i("el-button",{on:{click:function(e){t.backToIndex()}}},[t._v("返回列表")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.createData()}}},[t._v("立即创建")])],1)],1)],1)},[],!1,null,"3fcd2c5c",null));g.options.__file="addInformation.vue";e.default=g.exports},Y0z6:function(t,e,i){},iq4v:function(t,e,i){i("Mqbl"),t.exports=i("WEpk").Object.keys},kgrk:function(t,e,i){},ukHw:function(t,e,i){"use strict";i.d(e,"a",function(){return o}),i.d(e,"c",function(){return a}),i.d(e,"d",function(){return s}),i.d(e,"b",function(){return l});var n=i("t3Un");function o(t){return Object(n.a)({url:"/admin/information/page",method:"post",params:t})}function a(t){return Object(n.a)({url:"/admin/information/save",method:"post",data:t})}function s(t){return Object(n.a)({url:"/admin/information/update",method:"post",data:t})}function l(t){return Object(n.a)({url:"/admin/information/remove",method:"post",data:t})}},wyw5:function(t,e,i){},zn7N:function(t,e,i){var n=i("Y7ZC"),o=i("WEpk"),a=i("KUxP");t.exports=function(t,e){var i=(o.Object||{})[t]||Object[t],s={};s[t]=e(i),n(n.S+n.F*a(function(){i(1)}),"Object",s)}}}]);